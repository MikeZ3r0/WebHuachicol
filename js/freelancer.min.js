/*!
 * Start Bootstrap - Freelancer v5.0.3 (https://startbootstrap.com/template-overviews/freelancer)
 * Copyright 2013-2019 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-freelancer/blob/master/LICENSE)
 */

!function(t){"use strict";t('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var o=t(this.hash);if((o=o.length?o:t("[name="+this.hash.slice(1)+"]")).length)return t("html, body").animate({scrollTop:o.offset().top-70},1e3,"easeInOutExpo"),!1}}),t(document).scroll(function(){100<t(this).scrollTop()?t(".scroll-to-top").fadeIn():t(".scroll-to-top").fadeOut()}),t(".js-scroll-trigger").click(function(){t(".navbar-collapse").collapse("hide")}),t("body").scrollspy({target:"#mainNav",offset:80});var o=function(){100<t("#mainNav").offset().top?t("#mainNav").addClass("navbar-shrink"):t("#mainNav").removeClass("navbar-shrink")};o(),t(window).scroll(o),t(".portfolio-item").magnificPopup({type:"inline",preloader:!1,focus:"#username",modal:!0}),t(document).on("click",".portfolio-modal-dismiss",function(o){o.preventDefault(),t.magnificPopup.close()}),t(function(){t("body").on("input propertychange",".floating-label-form-group",function(o){t(this).toggleClass("floating-label-form-group-with-value",!!t(o.target).val())}).on("focus",".floating-label-form-group",function(){t(this).addClass("floating-label-form-group-with-focus")}).on("blur",".floating-label-form-group",function(){t(this).removeClass("floating-label-form-group-with-focus")})})}(jQuery);

$('.asignarSedena').click(function() {
    $('#ModalSedena').modal('hide');
    $('#ModalPemex').modal('show');
});


  // confirmation
$('.example-p-2').on('click', function(){
  $.confirm({
      title: 'A secure action',
      content: 'Its smooth to do multiple confirms at a time. <br> Click confirm or cancel for another modal',
      icon: 'fa fa-question-circle',
      animation: 'scale',
      closeAnimation: 'scale',
      opacity: 0.5,
      buttons: {
          'confirm': {
              text: 'Proceed',
              btnClass: 'btn-blue',
              action: function(){
                  $.confirm({
                      title: 'This maybe critical',
                      content: 'Critical actions can have multiple confirmations like this one.',
                      icon: 'fa fa-warning',
                      animation: 'scale',
                      closeAnimation: 'zoom',
                      buttons: {
                          confirm: {
                              text: 'Yes, sure!',
                              btnClass: 'btn-orange',
                              action: function(){
                                  $.alert('A very critical action <strong>triggered!</strong>');
                              }
                          },
                          cancel: function(){
                              $.alert('you clicked on <strong>cancel</strong>');0
                          }
                      }
                  });
              }
          },
          cancel: function(){
              $.alert('you clicked on <strong>cancel</strong>');
          },
          moreButtons: {
              text: 'something else',
              action: function(){
                  $.alert('you clicked on <strong>something else</strong>');
              }
          },
      }
  });
});

document.addEventListener('DOMContentLoaded', function () {
  cargarDatos();
  if (document.querySelectorAll('#mapa').length > 0)
  {
   /* var js_file = document.createElement('script');
    js_file.type = 'text/javascript';
    js_file.src = 'https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js';
    document.getElementsByTagName('head')[0].appendChild(js_file);
    var css_file = document.createElement('link');
    css_file.type = 'text/css';
    css_file.rel = 'stylesheet';
    css_file.href = 'https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/css/ol.css';
    css_file.media = 'screen';
    document.getElementsByTagName('head')[0].appendChild(css_file);
    */
    initMap();
  }
});

var map = null;
var labels = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
var markers = null;
var locations = [
        {lat: 19.4440685, lng: -99.1418708},
        {lat: 19.559797, lng: -99.0500927},
        {lat: 19.835556, lng: -98.9352197}
      ]

function initMap() {
    //No es necesaria la linea si se trabaja con EPSG: 4326 como proyeccion
    //var centro = ol.proj.fromLonLat([-100,21]);
    var view = new ol.View({center: [-100,21], zoom: 4,projection: 'EPSG:4326'});
    map = new ol.Map({
        target: 'mapa',
        layers: [new ol.layer.Tile({
            preload: 4,
            source: new ol.source.OSM(),
            })
        ],
        loadThilesWhileAnimating: true,
        view: view
    });
}



var json = {"denuncias":[
    {"Folio":15,"Coordenadas":"15.5198976,-98.1301328","Descripcion":"Fuga en tuberia","Status":"En proceso","Distancia":"verde","Accion":"true"},
    {"Folio":17,"Coordenadas":"21.5196986,-99.1625728","Descripcion":"Sabotaje","Status":"En proceso","Distancia":"amarillo","Accion":"true"},
    {"Folio":21,"Coordenadas":"12.5128576,-97.1354728","Descripcion":"Robo de combustible","Status":"Finalizado","Distancia":"rojo","Accion":"true"},
    {"Folio":30,"Coordenadas":"15.3198976,-98.1301328","Descripcion":"Fuga en tuberia","Status":"En espera","Distancia":"amarillo","Accion":"true"},
    {"Folio":42,"Coordenadas":"15.5898976,-98.1401328","Descripcion":"Robo de combustible","Status":"Sin asignar","Distancia":"rojo","Accion":"true"},
    {"Folio":43,"Coordenadas":"15.2098976,-98.8001328","Descripcion":"Fuga en tuberia","Status":"En proceso","Distancia":"verde","Accion":"true"}
]};


function cargarDatos(){
    var DatosJason = JSON.parse(JSON.stringify(json));
    console.log(DatosJason.denuncias.length);
    $("#tablaDenuncias").append('<thead role="rowgroup"><tr role="row">'+
        '<th role="columnheader" class="fol">Folio</th>'+
        '<th role="columnheader" class="coo">Coordenadas</th>'+
        '<th role="columnheader" class="des">Descripci√≥n</th>'+
        '<th role="columnheader" class="sta">Status</th>'+
        '<th role="columnheader" class="dis">Distancia al ducto</th>'+
        '<th role="columnheader" class="acc">Acciones</th></tr></thead><tbody>');
    for (i = 0; i < DatosJason.denuncias.length; i++){
        $("#tablaDenuncias").append('<tr role="row">'+
            '<td role="cell">'+ DatosJason.denuncias[i].Folio +'</td>'+
            '<td role="cell">'+ DatosJason.denuncias[i].Coordenadas +'</td>'+
            '<td role="cell">'+ DatosJason.denuncias[i].Descripcion +'</td>'+
            '<td role="cell">'+ DatosJason.denuncias[i].Status +'</td>'+
            '<td role="cell"><div class='+ DatosJason.denuncias[i].Distancia +'></div></td>'+
            '<td role="cell"><div class="accion"><div class="asignar"><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#ModalSedena"></button></div>'+
            '<div class="eliminar"><button type="submit"></button></div></div></td></tr>'
        );
    }
    $("#tablaDenuncias").append('</tbody>');
}

